# ğŸ“¦ ì œëŒ€ë¡œ ì„¤ê³„í•˜ëŠ” ì‚¬ìš©ì ì‹œìŠ¤í…œ: í´ë˜ìŠ¤ê°€ ì±…ì„ì§€ëŠ” ê³ ìœ  IDì™€ ë¡œê·¸ì¸ êµ¬ì¡°

---

## ğŸ§­ ë¯¸ì…˜ ë°°ê²½

ë‹¹ì‹ ì€ ì´ë©”ì¼ íšŒì›ê°€ì… ê¸°ë°˜ì˜ SaaS ì„œë¹„ìŠ¤ë¥¼ ìš´ì˜í•˜ëŠ” ìŠ¤íƒ€íŠ¸ì—…ì˜ ê°œë°œìì…ë‹ˆë‹¤.
ì„œë¹„ìŠ¤ê°€ ì„±ì¥í•˜ë©´ì„œ ì‚¬ìš©ì ê³„ì • ê´€ë¦¬ì— ì—¬ëŸ¬ ë¬¸ì œê°€ ë°œìƒí•˜ê³  ìˆìŠµë‹ˆë‹¤:

- ì‚¬ìš©ìë§ˆë‹¤ ê³ ìœ í•œ IDê°€ ì—†ì–´ ë°°ì—´ ìˆœì„œë§Œìœ¼ë¡œ ë°ì´í„°ë¥¼ êµ¬ë¶„í•˜ë‹¤ê°€ ì •ë³´ê°€ ë®ì–´ì”Œì›Œì§€ëŠ” ë¬¸ì œ
- ì „ì²´ ê°€ì…ì ìˆ˜ë¥¼ í™•ì¸í•˜ë ¤ë©´ ë§¤ë²ˆ DB ì¿¼ë¦¬ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì‹¤í–‰í•´ì•¼ í•˜ëŠ” ë¹„íš¨ìœ¨
- ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸í•  ë•Œë§ˆë‹¤ ë°°ì—´ì„ ëŒë©° ìˆ˜ë™ ë¹„êµí•˜ëŠ” ì½”ë“œê°€ ë³µë¶™ë˜ê³  ìˆìŒ
- ë¹„ë°€ë²ˆí˜¸ë¥¼ í•˜ë“œì½”ë”©í•˜ê±°ë‚˜ ì™¸ë¶€ì—ì„œ roleì„ ì§ì ‘ ë°”ê¾¸ëŠ” ë³´ì•ˆ ì‚¬ê³ 

ì´ì œëŠ” ê°ì²´ê°€ ìì‹ ì˜ ì •ë³´ëŠ” ë³´í˜¸í•˜ê³ , ì‹œìŠ¤í…œ ì „ì²´ì ì¸ íë¦„(ì´ ê°€ì…ì ìˆ˜, ë¡œê·¸ì¸ ë“±)ì€ í´ë˜ìŠ¤ê°€ ì±…ì„ì§€ëŠ”
êµ¬ì¡°ì ì¸ ê°ì²´ì§€í–¥ ì„¤ê³„ê°€ í•„ìš”í•©ë‹ˆë‹¤.

---

## ğŸ¯ ë¯¸ì…˜ ëª©í‘œ

- ê° ì‚¬ìš©ìì—ê²Œ **ê³ ìœ  ID**ë¥¼ ìë™ìœ¼ë¡œ ë¶€ì—¬í•©ë‹ˆë‹¤ (í´ë˜ìŠ¤ static í•„ë“œ í™œìš©).
- ì „ì²´ ì‚¬ìš©ì ìˆ˜ì™€ ì‚¬ìš©ì ëª©ë¡ì€ í´ë˜ìŠ¤ê°€ ì§ì ‘ ì¶”ì í•˜ê³  ë°˜í™˜í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.
- \*\*ë¹„ë°€ë²ˆí˜¸, ì—­í• , IDëŠ” ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ì—†ë„ë¡ ìº¡ìŠí™”(#private)\*\*í•©ë‹ˆë‹¤.
- **ë¡œê·¸ì¸ì€ ê°ì²´ ì—†ì´ë„ `UserAccount.login(email, password)` í˜•íƒœë¡œ ìˆ˜í–‰**ë©ë‹ˆë‹¤.
- **ì—­í•  ë³€ê²½ì€ ê´€ë¦¬ì ìš”ì²­ ì‹œì—ë§Œ ê°€ëŠ¥**í•˜ë„ë¡ ì œí•œí•©ë‹ˆë‹¤.

---

## ğŸ“‹ ë¯¸ì…˜ ìš”êµ¬ì‚¬í•­

- `UserAccount` í´ë˜ìŠ¤ë¥¼ ì •ì˜í•˜ì„¸ìš”.
- ë‹¤ìŒ í•„ë“œëŠ” `#private`ìœ¼ë¡œ ì„ ì–¸í•´ì•¼ í•©ë‹ˆë‹¤:

  - `#id`, `#password`, `#role`

- ë‹¤ìŒ í´ë˜ìŠ¤ ì†ì„±ì€ `static`ìœ¼ë¡œ ì •ì˜í•´ì•¼ í•©ë‹ˆë‹¤:

  - `#nextId`, `#totalCount`, `#users`

- ë‹¤ìŒ ë©”ì„œë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:

  - `getEmail()`, `getRole()`, `getId()`
  - `checkPassword()`, `changePassword()`, `updateRole()`
  - `static login(email, password)`, `static getTotalUsers()`

---

## âœ… ì •ë‹µ ì½”ë“œ

```js
class UserAccount {
  // í´ë˜ìŠ¤ ì „ì²´ì—ì„œ ê³µìœ ë˜ëŠ” private ì •ì  í•„ë“œë“¤
  static #nextId = 1;
  static #totalCount = 0;
  static #users = [];

  // ì¸ìŠ¤í„´ìŠ¤ ì „ìš© private í•„ë“œë“¤
  #id;
  #password;
  #role;

  constructor(username, email, password) {
    this.username = username;
    this.email = email;
    this.createdAt = new Date();

    this.#password = password;
    this.#role = "user";
    this.#id = UserAccount.#nextId++;

    UserAccount.#totalCount++;
    UserAccount.#users.push(this);
  }

  getEmail() {
    return this.email;
  }

  getRole() {
    return this.#role;
  }

  getId() {
    return this.#id;
  }

  checkPassword(inputPassword) {
    return this.#password === inputPassword;
  }

  changePassword(currentPassword, newPassword) {
    if (this.#password === currentPassword) {
      if (typeof newPassword === "string" && newPassword.length >= 4) {
        this.#password = newPassword;
        console.log("âœ… ë¹„ë°€ë²ˆí˜¸ê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.");
      } else {
        console.log("âŒ ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 4ìë¦¬ ì´ìƒì˜ ë¬¸ìì—´ì´ì–´ì•¼ í•©ë‹ˆë‹¤.");
      }
    } else {
      console.log("âŒ ê¸°ì¡´ ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.");
    }
  }

  updateRole(newRole, requesterRole) {
    if (requesterRole === "admin") {
      this.#role = newRole;
      console.log(`âœ… ì—­í• ì´ '${newRole}'ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.`);
    } else {
      console.log(
        "âŒ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤. ì—­í•  ë³€ê²½ì€ ê´€ë¦¬ìë§Œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
      );
    }
  }

  static getTotalUsers() {
    return `í˜„ì¬ ê°€ì…ì ìˆ˜: ${UserAccount.#totalCount}ëª…`;
  }

  static login(email, password) {
    const user = UserAccount.#users.find((u) => u.email === email);
    if (!user) {
      console.log("âŒ ì‚¬ìš©ì ì´ë©”ì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
      return null;
    }
    if (!user.checkPassword(password)) {
      console.log("âŒ ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.");
      return null;
    }
    console.log(`âœ… ${user.username}ë‹˜ ë¡œê·¸ì¸ ì„±ê³µ`);
    return user;
  }
}
```

---

## âœ… ì •ë‹µ ì½”ë“œ ìƒì„¸ ì„¤ëª…

### ğŸ”§ ìƒì„±ì

```js
constructor(username, email, password);
```

- ì‚¬ìš©ìì˜ `username`, `email`, `password`ë¥¼ ë°›ì•„ ì´ˆê¸°í™”
- `createdAt`ì€ ìƒì„± ì‹œê° ìë™ ê¸°ë¡
- `#id`ëŠ” í´ë˜ìŠ¤ ë‚´ë¶€ `#nextId` ê°’ì„ ì‚¬ìš©í•´ ìë™ ì¦ê°€
- ìƒì„±ëœ ì¸ìŠ¤í„´ìŠ¤ëŠ” í´ë˜ìŠ¤ì˜ `#users` ë°°ì—´ì— ì €ì¥ë˜ê³ , `#totalCount`ê°€ ì¦ê°€í•¨

---

### ğŸ†” getId()

```js
getId() {
  return this.#id;
}
```

- ì‚¬ìš©ì ê°ì²´ì˜ ê³ ìœ  IDë¥¼ ì™¸ë¶€ì—ì„œ ì½ì„ ìˆ˜ ìˆë„ë¡ ë©”ì„œë“œ ì œê³µ
- IDëŠ” `#`ìœ¼ë¡œ ë³´í˜¸ë˜ì–´ ì§ì ‘ ì ‘ê·¼ì€ ë¶ˆê°€

---

### ğŸ” checkPassword()

```js
checkPassword(inputPassword) {
  return this.#password === inputPassword;
}
```

- ì™¸ë¶€ì—ì„œ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ì€ ê°€ëŠ¥í•˜ì§€ë§Œ ì‹¤ì œ ê°’ì„ ë…¸ì¶œí•˜ì§€ ì•ŠìŒ

---

### ğŸ” changePassword()

```js
changePassword(currentPassword, newPassword);
```

- í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ê°€ ì •í™•íˆ ì¼ì¹˜í•˜ê³ , ìƒˆ ë¹„ë°€ë²ˆí˜¸ê°€ 4ì ì´ìƒì¼ ë•Œë§Œ ë³€ê²½
- ì¡°ê±´ ë¯¸ë‹¬ì¼ ê²½ìš° ì½˜ì†”ì— ì˜¤ë¥˜ ë©”ì‹œì§€ ì¶œë ¥

---

### ğŸ§¾ getRole()

```js
getRole() {
  return this.#role;
}
```

- ì‚¬ìš©ìì˜ í˜„ì¬ ì—­í• ì„ ì½ê¸° ì „ìš©ìœ¼ë¡œ ë°˜í™˜

---

### ğŸ§­ updateRole()

```js
updateRole(newRole, requesterRole);
```

- `requesterRole === 'admin'`ì¸ ê²½ìš°ì—ë§Œ ì—­í•  ë³€ê²½ í—ˆìš©
- ì¼ë°˜ ì‚¬ìš©ìê°€ roleì„ ë³€ê²½í•  ìˆ˜ ì—†ë„ë¡ ì œì–´

---

### ğŸ“§ getEmail()

```js
getEmail() {
  return this.email;
}
```

- ì´ë©”ì¼ì€ ê³µê°œ ì •ë³´ì§€ë§Œ ë³€ê²½ì€ ë¶ˆê°€ (setter ì—†ìŒ)

---

### ğŸ§® static getTotalUsers()

```js
static getTotalUsers() {
  return `í˜„ì¬ ê°€ì…ì ìˆ˜: ${UserAccount.#totalCount}ëª…`;
}
```

- í˜„ì¬ ê°€ì…ì ìˆ˜ë¥¼ í´ë˜ìŠ¤ ë‹¨ìœ„ì—ì„œ ë°˜í™˜
- ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ë“±ì—ì„œ í†µê³„ ì¶œë ¥ì— ìœ ìš©

---

### ğŸ” static login()

```js
static login(email, password)
```

- ì‚¬ìš©ì ì¸ìŠ¤í„´ìŠ¤ ì—†ì´ í´ë˜ìŠ¤ ì´ë¦„ìœ¼ë¡œ ë¡œê·¸ì¸ ê°€ëŠ¥
- `email`ë¡œ ì‚¬ìš©ì ê²€ìƒ‰ í›„, `checkPassword()`ë¡œ ì¸ì¦
- ì„±ê³µ ì‹œ ì‚¬ìš©ì ê°ì²´ ë°˜í™˜, ì‹¤íŒ¨ ì‹œ `null` ë°˜í™˜

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ íë¦„

```js
const a = new UserAccount("ì² ìˆ˜", "chulsoo@email.com", "pass1234");
const b = new UserAccount("ì˜í¬", "younghee@email.com", "abcd1234");

console.log(a.username); // ì² ìˆ˜
console.log(a.getEmail()); // chulsoo@email.com
console.log(a.getRole()); // user
console.log(UserAccount.getTotalUsers()); // í˜„ì¬ ê°€ì…ì ìˆ˜: 2ëª…

UserAccount.login("wrong@email.com", "1234"); // âŒ ì´ë©”ì¼ ì—†ìŒ
UserAccount.login("chulsoo@email.com", "wrong"); // âŒ ë¹„ë°€ë²ˆí˜¸ ì˜¤ë¥˜
UserAccount.login("chulsoo@email.com", "pass1234"); // âœ… ë¡œê·¸ì¸ ì„±ê³µ

a.changePassword("pass1234", "12"); // âŒ ì§§ì€ ë¹„ë°€ë²ˆí˜¸
a.changePassword("pass1234", "newpass"); // âœ… ë³€ê²½ ì„±ê³µ

a.updateRole("admin", "user"); // âŒ ê¶Œí•œ ì—†ìŒ
a.updateRole("admin", "admin"); // âœ… ì—­í•  ë³€ê²½
console.log(a.getRole()); // admin
```

---

## ğŸ§± êµ¬ì¡° ì‹œê°í™”

```js
[UserAccount í´ë˜ìŠ¤]
 â”œâ”€ static #nextId         â†’ ê³ ìœ  ID ì¦ê°€ê¸°
 â”œâ”€ static #totalCount     â†’ ì´ ê°€ì…ì ìˆ˜
 â”œâ”€ static #users[]        â†’ ì‚¬ìš©ì ëª©ë¡
 â”œâ”€ static login()         â†’ ë¡œê·¸ì¸ ë©”ì„œë“œ
 â””â”€ static getTotalUsers() â†’ ì´ ì‚¬ìš©ì ìˆ˜ ë°˜í™˜

[UserAccount ì¸ìŠ¤í„´ìŠ¤]
 â”œâ”€ #id, #password, #role  â†’ ë¹„ê³µê°œ
 â”œâ”€ username, email        â†’ ê³µê°œ
 â”œâ”€ createdAt              â†’ ê°€ì… ì‹œê°
 â”œâ”€ checkPassword()
 â”œâ”€ changePassword()
 â”œâ”€ getEmail(), getRole(), getId()
 â””â”€ updateRole(newRole, requesterRole)
```

---

## ğŸ§  êµ¬ì¡° ìš”ì•½

| ê¸°ëŠ¥ êµ¬ë¶„      | êµ¬í˜„ ë°©ì‹                                                |
| -------------- | -------------------------------------------------------- |
| ê³ ìœ  ID ìƒì„±   | `static #nextId`ë¡œ ìë™ ì¦ê°€                             |
| ì „ì²´ ì‚¬ìš©ì ìˆ˜ | `static #totalCount`, `getTotalUsers()`ë¡œ ë°˜í™˜           |
| ë¡œê·¸ì¸ ê¸°ëŠ¥    | `static login()`ìœ¼ë¡œ í´ë˜ìŠ¤ ì°¨ì› ì²˜ë¦¬                    |
| ë¯¼ê° ì •ë³´ ë³´í˜¸ | `#password`, `#role`, `#id`ëŠ” ì™¸ë¶€ ì ‘ê·¼ ì°¨ë‹¨             |
| ì—­í•  ì œì–´      | `updateRole()`ì€ `requesterRole === 'admin'`ì¼ ë•Œë§Œ í—ˆìš© |
| ìƒì„± ì‹œê°„ ê¸°ë¡ | `createdAt` í•„ë“œ ìë™ ì €ì¥                               |

---

## ğŸ“ ì°¸ê³ : ì‹¤ë¬´ìš© ID ì„¤ê³„ íŒ

ì´ ì˜ˆì œì—ì„œëŠ” í•™ìŠµ ëª©ì ìƒ `#nextId`ë¥¼ ì‚¬ìš©í•´ ê³ ìœ  IDë¥¼ ìë™ ì¦ê°€ ë°©ì‹ìœ¼ë¡œ ë¶€ì—¬í•©ë‹ˆë‹¤.
í•˜ì§€ë§Œ ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë°©ì‹ì´ ë”ìš± ì í•©í•©ë‹ˆë‹¤:

- `crypto.randomUUID()` (Node.js 16.17 ì´ìƒ ë‚´ì¥)
- `uuid` ë¼ì´ë¸ŒëŸ¬ë¦¬ í™œìš©
- ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ `AUTO_INCREMENT` ë˜ëŠ” `SERIAL` í•„ë“œ ì‚¬ìš©

ì´ëŸ° ë°©ì‹ì€ **ì¶©ëŒ ì—†ì´ ì „ì—­ ê³ ìœ  ID**ë¥¼ ì•ˆì „í•˜ê²Œ ìƒì„±í•  ìˆ˜ ìˆì–´
ë¶„ì‚° ì‹œìŠ¤í…œì´ë‚˜ ë³‘ë ¬ ê°€ì… í™˜ê²½ì—ì„œë„ ì•ˆì •ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤.

---
